#!/bin/sh

wget https://ftp.drupal.org/files/projects/drupal-7.31.zip
unzip drupal-7.31.zip
mv drupal-7.31 drupal

cp -R drupal /var/www/html

chmod a+w /var/www/html/drupal/sites/default/

mysql -u root -p -e "CREATE DATABASE drupal CHARACTER SET utf8 COLLATE utf8_general_ci";

cat << EOS > ./dbscript.txt
CREATE USER drupal@localhost IDENTIFIED BY 'password';

GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, INDEX, ALTER, CREATE TEMPORARY TABLES ON drupal.* TO 'drupal'@'localhost' IDENTIFIED BY 'password';

exit
EOS

mysql -u root -p < ./dbscript.txt


cp /var/www/html/drupal/sites/default/default.settings.php /var/www/html/drupal/sites/default/settings.php

chmod a+w /var/www/html/drupal/sites/default/settings.php

echo "[+] OK! Drupal installation is complete! You must see http://localhost/drupal/install.php, after that, you can check version of drupal at http://localhost/drupal/?q=admin/reports/status with admin permission"
